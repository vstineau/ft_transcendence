{
  "annotations": {"list": [{"builtIn": 1, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard"}]},
  "editable": true,
  "graphTooltip": 0,
  "links": [],
  "liveNow": false,
  "panels": [
    {"type": "timeseries", "title": "Parties démarrées /s", "id": 10, "datasource": null,
      "targets": [{"expr": "sum by (game)(rate(ft_games_started_total{game=~\"$game\"}[5m]))", "legendFormat": "{{game}}", "refId": "A"}],
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 0},
      "fieldConfig": {"defaults": {"unit": "ops"}, "overrides": []},
      "options": {"legend": {"showLegend": true}, "tooltip": {"mode": "single"}}
    },
    {"type": "timeseries", "title": "Parties terminées /s", "id": 11, "datasource": null,
      "targets": [{"expr": "sum by (game, result)(rate(ft_games_finished_total{game=~\"$game\"}[5m]))", "legendFormat": "{{game}} {{result}}", "refId": "A"}],
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 0},
      "fieldConfig": {"defaults": {"unit": "ops"}, "overrides": []},
      "options": {"legend": {"showLegend": true}, "tooltip": {"mode": "single"}}
    },
    {"type": "timeseries", "title": "Parties terminées /s (par résultat)", "id": 13, "datasource": null,
      "targets": [{"expr": "sum by (result) (rate(ft_games_finished_total{game=~\"$game\"}[5m]))", "legendFormat": "{{result}}", "refId": "A"}],
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 8},
      "fieldConfig": {"defaults": {"unit": "ops"}, "overrides": []},
      "options": {"legend": {"showLegend": true}, "tooltip": {"mode": "single"}, "stacking": "normal"}
    },
    {"type": "timeseries", "title": "Durée de partie (p50/p90)", "id": 12, "datasource": null,
      "targets": [
        {"expr": "histogram_quantile(0.5, sum by (le)(rate(ft_game_duration_seconds_bucket{game=~\"$game\"}[5m])))", "legendFormat": "p50", "refId": "A"},
        {"expr": "histogram_quantile(0.9, sum by (le)(rate(ft_game_duration_seconds_bucket{game=~\"$game\"}[5m])))", "legendFormat": "p90", "refId": "B"}
      ],
      "gridPos": {"h": 8, "w": 24, "x": 0, "y": 16},
      "fieldConfig": {"defaults": {"unit": "s"}, "overrides": []},
      "options": {"legend": {"showLegend": true}, "tooltip": {"mode": "single"}}
    },
    {"type": "timeseries", "title": "Win ratio (1h)", "id": 14, "datasource": null,
      "targets": [{"expr": "100 * sum by (result) (increase(ft_games_finished_total{game=~\"$game\"}[1h])) / sum(increase(ft_games_finished_total{game=~\"$game\"}[1h]))", "legendFormat": "{{result}}", "refId": "A"}],
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 24},
      "fieldConfig": {"defaults": {"unit": "percent"}, "overrides": []},
      "options": {"legend": {"showLegend": true}, "tooltip": {"mode": "single"}}
    },
    {"type": "stat", "title": "P1 win ratio (1h) — $p1_nick", "id": 15, "datasource": null,
      "targets": [{"expr": "100 * sum(increase(ft_pong_games_finished_info_total{p1_nick=~\"$p1_nick\",winner=~\"$p1_nick\"}[1h])) / sum(increase(ft_pong_games_finished_info_total{p1_nick=~\"$p1_nick\"}[1h]))", "legendFormat": "P1 win %", "refId": "A"}],
      "gridPos": {"h": 4, "w": 6, "x": 12, "y": 24},
      "options": {"reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "colorMode": "value", "graphMode": "none", "justifyMode": "center", "textMode": "auto"},
      "fieldConfig": {"defaults": {"unit": "percent", "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": 0}, {"color": "green", "value": 50}]}}, "overrides": []}
    },
    {"type": "stat", "title": "P2 win ratio (1h) — $p2_nick", "id": 16, "datasource": null,
      "targets": [{"expr": "100 * sum(increase(ft_pong_games_finished_info_total{p2_nick=~\"$p2_nick\",winner=~\"$p2_nick\"}[1h])) / sum(increase(ft_pong_games_finished_info_total{p2_nick=~\"$p2_nick\"}[1h]))", "legendFormat": "P2 win %", "refId": "A"}],
      "gridPos": {"h": 4, "w": 6, "x": 18, "y": 24},
      "options": {"reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "colorMode": "value", "graphMode": "none", "justifyMode": "center", "textMode": "auto"},
      "fieldConfig": {"defaults": {"unit": "percent", "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": 0}, {"color": "green", "value": 50}]}}, "overrides": []}
    }
  ],
  "refresh": "10s",
  "schemaVersion": 39,
  "style": "dark",
  "tags": ["transcendence", "games", "product"],
  "templating": {"list": [
    {"name": "game", "type": "query", "hide": 0, "datasource": null, "query": "label_values(ft_games_started_total, game)", "refresh": 1, "current": {"text": "pong", "value": "pong", "selected": true}, "includeAll": true, "multi": false},
    {"name": "p1_nick", "type": "query", "hide": 0, "datasource": null, "query": "label_values(ft_pong_games_finished_info_total, p1_nick)", "refresh": 1, "current": {"text": "All", "value": ".*", "selected": true}, "includeAll": true, "allValue": ".*", "multi": false},
    {"name": "p2_nick", "type": "query", "hide": 0, "datasource": null, "query": "label_values(ft_pong_games_finished_info_total, p2_nick)", "refresh": 1, "current": {"text": "All", "value": ".*", "selected": true}, "includeAll": true, "allValue": ".*", "multi": false}
  ]},
  "time": {"from": "now-1h", "to": "now"},
  "timezone": "",
  "title": "Transcendence — Jeux",
  "version": 1
}
