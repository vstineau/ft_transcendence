{
  "annotations": {"list": [{"builtIn": 1, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard"}]},
  "editable": true,
  "gnetId": null,
  "graphTooltip": 0,
  "links": [],
  "liveNow": false,
  "panels": [
    {"type": "stat", "title": "Backend UP", "id": 1, "datasource": null,
      "targets": [{"expr": "up{job=~\"$job\"}", "legendFormat": "{{instance}}", "refId": "A"}],
      "gridPos": {"h": 4, "w": 6, "x": 0, "y": 0},
      "options": {"reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "colorMode": "value", "graphMode": "none", "justifyMode": "center", "textMode": "auto"},
      "fieldConfig": {"defaults": {"thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": 0}, {"color": "green", "value": 1}]}, "unit": "none"}, "overrides": []}
    },
    {"type": "timeseries", "title": "CPU process Node (backend) %", "id": 2, "datasource": null,
      "targets": [{"expr": "100 * (rate(ft_process_cpu_user_seconds_total{job=~\"$job\"}[5m]) + rate(ft_process_cpu_system_seconds_total{job=~\"$job\"}[5m]))", "legendFormat": "process cpu %", "refId": "A"}],
      "gridPos": {"h": 8, "w": 12, "x": 6, "y": 0},
      "fieldConfig": {"defaults": {"unit": "percent"}, "overrides": []},
      "options": {"legend": {"showLegend": true}, "tooltip": {"mode": "single"}}
    },
    {"type": "timeseries", "title": "Heap utilisé / total (Node)", "id": 5, "datasource": null,
      "targets": [
        {"expr": "ft_nodejs_heap_size_used_bytes{job=~\"$job\"}", "legendFormat": "used", "refId": "A"},
        {"expr": "ft_nodejs_heap_size_total_bytes{job=~\"$job\"}", "legendFormat": "total", "refId": "B"}
      ],
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 4},
      "fieldConfig": {"defaults": {"unit": "bytes"}, "overrides": []},
      "options": {"legend": {"showLegend": true}, "tooltip": {"mode": "multi"}}
    },
    {"type": "timeseries", "title": "Mémoire process Node (RSS)", "id": 3, "datasource": null,
      "targets": [{"expr": "ft_process_resident_memory_bytes{job=~\"$job\"}", "legendFormat": "rss", "refId": "A"}],
      "gridPos": {"h": 8, "w": 12, "x": 6, "y": 8},
      "fieldConfig": {"defaults": {"unit": "bytes"}, "overrides": []},
      "options": {"legend": {"showLegend": true}, "tooltip": {"mode": "single"}}
    },
    {"type": "timeseries", "title": "Event Loop Lag (Node)", "id": 4, "datasource": null,
      "targets": [{"expr": "ft_nodejs_eventloop_lag_seconds{job=~\"$job\"}", "legendFormat": "lag", "refId": "A"}],
      "gridPos": {"h": 8, "w": 12, "x": 6, "y": 16},
      "fieldConfig": {"defaults": {"unit": "s"}, "overrides": []},
      "options": {"legend": {"showLegend": true}, "tooltip": {"mode": "single"}}
  }
  ],
  "refresh": "10s",
  "schemaVersion": 39,
  "style": "dark",
  "tags": ["transcendence", "system", "backend", "docker", "nodejs"],
  "templating": {"list": [
    {"name": "job", "type": "query", "hide": 0, "datasource": null, "query": "label_values(up, job)", "refresh": 1, "current": {"text": "backend", "value": "backend", "selected": true}, "includeAll": false, "multi": false}
  ]},
  "time": {"from": "now-1h", "to": "now"},
  "timezone": "",
  "title": "Transcendence — Système",
  "version": 1
}
